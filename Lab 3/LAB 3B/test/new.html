<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>SVG Star Pattern</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
</head>
<body>
    <svg id="svgContainer" width="800" height="600"></svg>

    <script>
        // Array to store coordinates
        let coordinates = [];

        // Array of predefined coordinates
        const predefinedCoordinates = [
            { x: 100, y: 100 },
            { x: 300, y: 300 },
            { x: 500, y: 200 },
            { x: 700, y: 400 }
        ];

        // Set up SVG element and dimensions
        const svgWidth = 800;
        const svgHeight = 600;

        const svg = d3.select("#svgContainer")
            .attr("width", svgWidth)
            .attr("height", svgHeight);

        // Create a rectangle with a click event
        const rectangle = svg.append("rect")
            .attr("width", svgWidth)
            .attr("height", svgHeight)
            .style("fill", "transparent")
            .on("click", handleMouseClick);

        // Function to handle mouse clicks
        function handleMouseClick(event) {
            // Get the mouse coordinates relative to the SVG container
            const [mouseX, mouseY] = d3.mouse(this);

            // Store the coordinates and a random color
            const randomColor = getRandomColor();
            coordinates.push({ x: mouseX, y: mouseY, color: randomColor });

            // Redraw the star pattern
            drawStarPattern();
        }

        // Function to draw the star pattern
        function drawStarPattern() {
            // Clear the SVG
            svg.selectAll("*").remove();

            // Redraw the rectangle
            svg.append("rect")
                .attr("width", svgWidth)
                .attr("height", svgHeight)
                .style("fill", "transparent")
                .on("click", handleMouseClick);

            // Define star pattern dimensions
            const centerX = svgWidth / 2;
            const centerY = svgHeight / 2;
            const horizontalLineLength = 100;
            const verticalLineLength = 100;
            const diagonalLineLength = 50;

            // Draw star pattern at predefined coordinates
            predefinedCoordinates.forEach(coord => {
                drawStar(coord.x, coord.y, centerX, centerY, horizontalLineLength, verticalLineLength, diagonalLineLength);
            });

            // Draw star pattern at user-clicked coordinates
            coordinates.forEach(coord => {
                drawStar(coord.x, coord.y, centerX, centerY, horizontalLineLength, verticalLineLength, diagonalLineLength, coord.color);
            });
        }

        // Function to draw a star pattern
        function drawStar(x, y, centerX, centerY, hLength, vLength, dLength, color) {
            const starGroup = svg.append("g")
                .attr("transform", `translate(${x},${y})`);

            starGroup.append("line")
                .attr("x1", centerX - hLength / 2)
                .attr("y1", centerY)
                .attr("x2", centerX + hLength / 2)
                .attr("y2", centerY)
                .attr("stroke", color || getRandomColor());

            starGroup.append("line")
                .attr("x1", centerX)
                .attr("y1", centerY - vLength / 2)
                .attr("x2", centerX)
                .attr("y2", centerY + vLength / 2)
                .attr("stroke", color || getRandomColor());

            starGroup.append("line")
                .attr("x1", centerX - dLength / 2)
                .attr("y1", centerY - dLength / 2)
                .attr("x2", centerX + dLength / 2)
                .attr("y2", centerY + dLength / 2)
                .attr("stroke", color || getRandomColor());

            starGroup.append("line")
                .attr("x1", centerX - dLength / 2)
                .attr("y1", centerY + dLength / 2)
                .attr("x2", centerX + dLength / 2)
                .attr("y2", centerY - dLength / 2)
                .attr("stroke", color || getRandomColor());
        }

        // Function to generate a random color
        function getRandomColor() {
            const letters = "0123456789ABCDEF";
            let color = "#";
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        // Initial drawing
        drawStarPattern();
    </script>
</body>
</html>
